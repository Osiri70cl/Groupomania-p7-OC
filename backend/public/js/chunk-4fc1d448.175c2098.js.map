{"version":3,"sources":["webpack:///./src/views/Profil.vue","webpack:///./src/views/Profil.vue?77f2","webpack:///./src/views/Profil.vue?4cae","webpack:///./src/components/UserModifyModal.vue","webpack:///./src/components/UserModifyModal.vue?bc87","webpack:///./src/components/UserModifyModal.vue?abb3"],"names":["class","type","title","displayModal","closeModal","modifyUser","deleteUser","user","userId","picture","src","alt","username","lastName","firstName","moment","birth","format","email","description","name","components","PencilIcon","MailIcon","TrashIcon","data","beforeMount","this","$store","dispatch","created","locale","methods","$router","push","id","then","computed","state","__exports__","render","role","aria-modal","aria-label","close","placeholder","uploadFile","ref","label","for","accept","disabled","validatedFields","messages","XCircleIcon","file","message","$refs","files","updateProfil","formData","FormData","append","$emit"],"mappings":"+KACQA,MAAM,kB,GACDA,MAAM,yB,GACRA,MAAM,Y,GACJA,MAAM,kB,GAoBRA,MAAM,wB,GACJA,MAAM,mB,aAOLA,MAAM,a,GAGPA,MAAM,iB,GACNA,MAAM,oB,GAMRA,MAAM,iB,GACJA,MAAM,a,GAENA,MAAM,Y,EAEX,eAEM,OAFDA,MAAM,aAAW,CACpB,eAAqC,MAAjCA,MAAM,kBAAiB,W,MAExBA,MAAM,kB,GACNA,MAAM,a,8KAlDjB,eAwDO,OAxDP,EAwDO,CAvDL,eAsDU,UAtDV,EAsDU,CArDR,eAoBM,MApBN,EAoBM,CAnBJ,eAkBM,MAlBN,EAkBM,CAjBJ,eAOS,UANPC,KAAK,SACLC,MAAM,wBACL,QAAK,8BAAE,EAAAC,cAAA,EAAAA,aAAA,qBACRH,MAAM,W,CAEN,eAAiC,GAArBA,MAAM,iB,eAEpB,eAAuD,GAArB,QAAO,EAAAI,YAAU,qB,QAA9B,EAAAC,cACrB,eAOS,UANPJ,KAAK,SACLC,MAAM,yBACL,QAAK,+BAAE,EAAAI,WAAW,EAAAC,KAAKC,UACxBR,MAAM,W,CAEN,eAA+B,GAApBA,MAAM,oBAIvB,eAiBM,MAjBN,EAiBM,CAhBJ,eAeM,MAfN,EAeM,CAbgB,OAAZ,EAAAO,KAAKE,S,iBADb,eAKE,O,MAHAT,MAAM,eACLU,IAAK,EAAAH,KAAKE,QACXE,IAAI,mB,iCAEN,eAEK,KAFL,EAEK,eADA,EAAAJ,KAAKK,UAAQ,GAElB,eAAqE,IAArE,EAAqE,eAAzC,EAAAL,KAAKM,UAAW,IAAC,eAAG,EAAAN,KAAKO,WAAS,GAC9D,eAGI,IAHJ,EAA4B,qBAE1B,eAAG,EAAAC,OAAO,EAAAR,KAAKS,OAAOC,OAAM,6BAIlC,eAaM,MAbN,EAaM,CAZJ,eAGM,MAHN,EAGM,CAFJ,eAA0B,GAAhBjB,MAAM,UAChB,eAAwC,IAAxC,EAAwC,eAAjB,EAAAO,KAAKW,OAAK,KAEnC,EAGA,eAIM,MAJN,EAIM,CAHJ,eAEI,IAFJ,EAEI,eADC,EAAAX,KAAKY,aAAW,W,yEAchB,GACbC,KAAM,SACNC,WAAY,CAAEhB,WAAA,aAAYiB,WAAA,OAAYC,SAAA,OAAUC,UAAA,QAEhDC,KAAM,iBAAO,CACXpB,YAAY,IAGdqB,YARa,WASXC,KAAKC,OAAOC,SAAS,iBAEvBC,QAAS,WACPH,KAAKZ,OAAS,IACd,IAAOgB,OAAO,OAGhBC,QAAS,CACP7B,aADO,WAELwB,KAAKtB,YAAa,EAClBsB,KAAKM,QAAQC,KAAK,mBAGpB9B,WANO,WAOLuB,KAAKtB,YAAa,EAClBsB,KAAKM,QAAQC,KAAK,YAGpB5B,WAXO,SAWI6B,GAAI,WACbR,KAAKC,OAAOC,SAAS,gBAAiBM,GACtCR,KAAKC,OAAOC,SAAS,UAAUO,MAAK,WAElC,EAAKH,QAAQC,KAAK,UAKxBG,SAAU,kBACL,eAAS,CACV9B,KAAM,SAAC+B,GAAD,OAAWA,EAAM/B,U,iCCjG7B,MAAMgC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,oCCTf,W,gFCGWxC,MAAM,c,GACJA,MAAM,kB,GAEPA,MAAM,qBACNyC,KAAK,SACLC,aAAW,OACXC,aAAW,8B,GAEN3C,MAAM,c,EAUX,eAA+C,MAA3CA,MAAM,eAAc,sBAAkB,G,EAuBxC,eAA2D,QAArDA,MAAM,WAAU,kCAA8B,G,GAa/CA,MAAM,uB,uHAxDvB,eA6Ea,QA7EDoB,KAAK,cAAY,C,wBAC3B,iBA2EM,CA3EN,eA2EM,OA3EDpB,MAAM,iBAAkB,QAAK,4BAAN,cAAW,Y,CACrC,eAyEM,MAzEN,EAyEM,CAxEJ,eAuEM,MAvEN,EAuEM,CAtEJ,eAqEM,MArEN,EAqEM,CA/DJ,eASM,MATN,EASM,CARJ,eAOS,UANPC,KAAK,SACL0C,aAAW,SACV,QAAK,8BAAE,EAAAC,OAAA,EAAAA,MAAA,qBACR5C,MAAM,e,CAEN,eAAiC,GAApBA,MAAM,kBAGvB,EAEA,eAkDO,aAjDL,eAQM,Y,eAPJ,eAME,Y,qDALS,EAAAY,SAAQ,IACjBZ,MAAM,sBACNC,KAAK,OACL4C,YAAY,oBACZF,aAAW,6B,mBAJF,EAAA/B,cAQb,eAQM,Y,eAPJ,eAME,Y,qDALS,EAAAO,YAAW,IACpBnB,MAAM,uBACNC,KAAK,OACL4C,YAAY,mBACZF,aAAW,0B,mBAJF,EAAAxB,iBAQb,EACA,eAUE,SATC,SAAM,8BAAE,EAAA2B,YAAA,EAAAA,WAAA,qBACTC,IAAI,OACJC,MAAA,GACAC,IAAI,QACJ7B,KAAK,QACLpB,MAAM,mBACNC,KAAK,OACLiD,OAAO,mCACPP,aAAW,8B,UAGb,eAeM,MAfN,EAeM,CAdJ,eAaS,UAZP1C,KAAK,SACJ,QAAK,wBAAuB,iBAAoC,YAIjED,MAAM,gBACLmD,UAAW,EAAAC,iB,CAEQ,kBAAR,EAAAC,U,iBAAZ,eAEC,SADE,8B,iBAEH,eAA4B,SAAf,c,mEAehB,GACbjC,KAAM,cAENC,WAAY,CAAEiC,YAAA,QAEd7B,KAAM,WACJ,MAAO,CACLb,SAAU,GACVM,MAAO,GACPC,YAAa,GACboC,KAAM,OAIVlB,SAAU,iCACL,eAAS,CACVgB,SAAU,SAACf,GAAD,OAAWA,EAAMkB,SAC3BjD,KAAM,SAAC+B,GAAD,OAAWA,EAAM/B,SAHnB,IAMN6C,gBAAiB,WACf,MACoB,KAAlBzB,KAAKf,UACgB,KAArBe,KAAKR,aACS,OAAdQ,KAAK4B,QASXvB,QAAS,CACPc,WADO,WAEL,IAAMS,EAAO5B,KAAK8B,MAAMF,KAAKG,MAAM,GACnC/B,KAAK4B,KAAOA,GAGdI,aAAc,WAGZ,IAAIxB,EAAKR,KAAKC,OAAOU,MAAM/B,KAAKC,OAE1BoD,EAAW,IAAIC,SAEC,KAAlBlC,KAAKf,UACPgD,EAASE,OAAO,WAAYnC,KAAKf,UAGV,KAArBe,KAAKR,aACPyC,EAASE,OAAO,cAAenC,KAAKR,aAEpB,OAAdQ,KAAK4B,MACPK,EAASE,OAAO,QAASnC,KAAK4B,MAGhC5B,KAAKC,OAAOC,SAAS,kBAAmB,CACtCM,GAAIA,EACJV,KAAMmC,KAIVhB,MA9BO,WA+BLjB,KAAKoC,MAAM,Y,iCC9IjB,MAAMxB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,yDCTf,W","file":"js/chunk-4fc1d448.175c2098.js","sourcesContent":["<template>\n  <main class=\"mainProfilArea\">\n    <section class=\"mainProfilArea-center\">\n      <div class=\"card-top\">\n        <div class=\"card-top-icons\">\n          <button\n            type=\"button\"\n            title=\"Modifier votre profil\"\n            @click=\"displayModal\"\n            class=\"btn-top\"\n          >\n            <PencilIcon class=\"pencilIcon\" />\n          </button>\n          <modify-user v-show=\"modifyUser\" @close=\"closeModal\" />\n          <button\n            type=\"button\"\n            title=\"Supprimer votre profil\"\n            @click=\"deleteUser(user.userId)\"\n            class=\"btn-top\"\n          >\n            <TrashIcon class=\"trashIcon\" />\n          </button>\n        </div>\n      </div>\n      <div class=\"user-profil-main-div\">\n        <div class=\"user-profil-div\">\n          <img\n            v-if=\"user.picture !== null\"\n            class=\"user-picture\"\n            :src=\"user.picture\"\n            alt=\"photo de profil\"\n          />\n          <h1 class=\"user-name\">\n            {{ user.username }}\n          </h1>\n          <p class=\"user-fullname\">{{ user.lastName }} {{ user.firstName }}</p>\n          <p class=\"user-member-date\">\n            Membre depuis le\n            {{ moment(user.birth).format(\"[le] DD MMMM YYYY\") }}\n          </p>\n        </div>\n      </div>\n      <div class=\"user-div-info\">\n        <div class=\"user-info\">\n          <MailIcon class=\"icons\" />\n          <p class=\"fontText\">{{ user.email }}</p>\n        </div>\n        <div class=\"user-info\">\n          <h3 class=\"fontText-title\">Bio :</h3>\n        </div>\n        <div class=\"user-info-text\">\n          <p class=\"user-text\">\n            {{ user.description }}\n          </p>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport moment from \"moment\";\nimport modifyUser from \"../components/UserModifyModal.vue\";\nimport { PencilIcon, MailIcon, TrashIcon } from \"@heroicons/vue/solid\";\n\nexport default {\n  name: \"Profil\",\n  components: { modifyUser, PencilIcon, MailIcon, TrashIcon },\n\n  data: () => ({\n    modifyUser: false, // La modale ne doit pas d'afficher initialement\n  }),\n\n  beforeMount() {\n    this.$store.dispatch(\"getUserInfos\"); // On veut récupérer les infos de l'user dès le chargement\n  },\n  created: function () {\n    this.moment = moment; // Permet le formatage de la date de création\n    moment.locale(\"fr\");\n  },\n\n  methods: {\n    displayModal() {\n      this.modifyUser = true;\n      this.$router.push(\"/profil/modify\");\n    },\n\n    closeModal() {\n      this.modifyUser = false;\n      this.$router.push(\"/profil\");\n    },\n\n    deleteUser(id) {\n      this.$store.dispatch(\"deleteOneUser\", id);\n      this.$store.dispatch(\"logOut\").then(() => {\n        // Pour éviter des erreurs la session se ferme après la suppression de l'user\n        this.$router.push(\"/\");\n      });\n    },\n  },\n\n  computed: {\n    ...mapState({\n      user: (state) => state.user,\n    }),\n  },\n};\n</script>\n\n<style>\n.mainProfilArea {\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 90vh;\n  width: 100%;\n  background-color: #4e5166;\n}\n\n.mainProfilArea-center {\n  width: 70%;\n  height: 100%;\n  background-color: white;\n  border-radius: 30px;\n  margin: 60px 0px;\n}\n.card-top {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.card-top-icons {\n  display: flex;\n}\n.card-top-icons:hover {\n  cursor: pointer;\n}\n\n.btn-top {\n  margin: 10px;\n}\n\n.pencilIcon {\n  height: 35px;\n  width: 35px;\n  fill: rgb(68, 68, 68);\n}\n.trashIcon {\n  height: 35px;\n  width: 35px;\n  fill: rgb(255, 0, 0);\n}\n\n.user-profil-main-div {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.user-profil-div {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.user-picture {\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  border: 3px solid rgb(68, 68, 68);\n  object-fit: cover;\n}\n.user-name {\n  padding: 5px;\n  font-size: 2rem;\n  font-weight: bold;\n  color: rgb(82, 82, 82);\n}\n.user-fullname {\n  padding: 5px;\n  font-size: 1.5rem;\n  font-style: italic;\n  color: rgb(88, 88, 88);\n}\n.user-member-date {\n  padding: 5px;\n  font-size: 1.2rem;\n  font-style: italic;\n  color: grey;\n}\n\n.user-div-info {\n  margin: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n}\n.user-info {\n  margin-top: 10px;\n  margin-bottom: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n}\n.icons {\n  margin-right: 10px;\n  height: 30px;\n  width: 30px;\n  fill: rgb(68, 68, 68);\n}\n\n.user-info-text {\n  height: 150px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  display: flex;\n  flex-wrap: wrap;\n}\n.user-text {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 10px;\n  font-size: 1.2rem;\n  font-style: italic;\n  color: rgb(88, 88, 88);\n}\n.fontText {\n  font-weight: 500;\n  color: rgb(104, 104, 104);\n}\n.fontText-title {\n  font-weight: 700;\n  font-style: italic;\n  color: rgb(104, 104, 104);\n}\n\n@media screen and (max-width: 979px) {\n  .mainProfilArea {\n    height: 120vh;\n  }\n  .mainProfilArea-center {\n    width: 100%;\n    height: 100%;\n    background-color: white;\n  }\n  .user-div-info {\n    margin: 30px;\n  }\n  .user-info-text {\n    height: 300px;\n    overflow-y: scroll;\n  }\n  .btn-top {\n    margin: 20px 20px 0px 15px;\n  }\n}\n</style>\n","import { render } from \"./Profil.vue?vue&type=template&id=a66848d6\"\nimport script from \"./Profil.vue?vue&type=script&lang=js\"\nexport * from \"./Profil.vue?vue&type=script&lang=js\"\n\nimport \"./Profil.vue?vue&type=style&index=0&id=a66848d6&lang=css\"\n\nimport exportComponent from \"D:\\\\codage\\\\OpenClassrooms\\\\Projet_7\\\\Groupomania-p7-OC\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Profil.vue?vue&type=style&index=0&id=a66848d6&lang=css\"","<template>\n  <transition name=\"modal-fade\">\n    <div class=\"modal-main-div\" @click.stop>\n      <div class=\"modal-main\">\n        <div class=\"modal-backdrop\">\n          <div\n            class=\"modal-main-content\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"modal modification de post\"\n          >\n            <div class=\"button-div\">\n              <button\n                type=\"button\"\n                aria-label=\"fermer\"\n                @click=\"close\"\n                class=\"closeButton\"\n              >\n                <XCircleIcon class=\"crossIcon\" />\n              </button>\n            </div>\n            <h2 class=\"modal-title\">Modifier un profil</h2>\n\n            <form>\n              <div>\n                <textarea\n                  v-model=\"username\"\n                  class=\"modal-textArea-user\"\n                  type=\"text\"\n                  placeholder=\"Nom d'utilisateur\"\n                  aria-label=\"Changer nom d'utilisateur\"\n                />\n              </div>\n\n              <div>\n                <textarea\n                  v-model=\"description\"\n                  class=\"modal-textArea-about\"\n                  type=\"text\"\n                  placeholder=\"A propos de vous\"\n                  aria-label=\"Changer de description\"\n                />\n              </div>\n\n              <span class=\"subtext\">Modifier votre photo de profil</span>\n              <input\n                @change=\"uploadFile\"\n                ref=\"file\"\n                label\n                for=\"image\"\n                name=\"image\"\n                class=\"modal-input-file\"\n                type=\"file\"\n                accept=\"image/png, image/jpeg, image/gif\"\n                aria-label=\"Changer la photo de profil\"\n              />\n\n              <div class=\"flex justify-center\">\n                <button\n                  type=\"button\"\n                  @click=\"\n                    updateProfil();\n                    close();\n                  \"\n                  class=\"modify-button\"\n                  :disabled=\"!validatedFields\"\n                >\n                  <span v-if=\"messages == 'Post modifié !'\"\n                    >Modification en cours...</span\n                  >\n                  <span v-else>Modifier</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { XCircleIcon } from \"@heroicons/vue/solid\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"modifyModal\",\n\n  components: { XCircleIcon },\n\n  data: function () {\n    return {\n      username: \"\",\n      email: \"\",\n      description: \"\",\n      file: null,\n    };\n  },\n\n  computed: {\n    ...mapState({\n      messages: (state) => state.message,\n      user: (state) => state.user,\n    }),\n\n    validatedFields: function () {\n      if (\n        this.username !== \"\" ||\n        this.description !== \"\" ||\n        this.file !== null\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n\n  methods: {\n    uploadFile() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n    },\n\n    updateProfil: function () {\n      // Même schéma que pour la création des posts, mis à part que le payload comporte l'id du post en plus du data\n\n      let id = this.$store.state.user.userId;\n\n      const formData = new FormData();\n\n      if (this.username !== \"\") {\n        formData.append(\"username\", this.username);\n      }\n\n      if (this.description !== \"\") {\n        formData.append(\"description\", this.description);\n      }\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n\n      this.$store.dispatch(\"updateUserInfos\", {\n        id: id,\n        data: formData,\n      });\n    },\n\n    close() {\n      this.$emit(\"close\");\n    },\n  },\n};\n</script>\n\n<style>\n.modal-fade-enter,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.5s ease-in-out;\n}\n\n.modal-main-div {\n  position: relative;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n}\n\n.modal-main {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  backdrop-filter: blur(20px);\n}\n\n.modal-backrop {\n  overflow-y: auto;\n  background-color: rgba(128, 128, 128, 0.445);\n}\n\n.modal-main-content {\n  margin: auto;\n  top: 100px;\n  position: relative;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 50%;\n  border: 2px solid grey;\n  border-radius: 20px;\n  padding: 40px;\n}\n.closeButton {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n}\n\n.crossIcon {\n  height: 50px;\n  width: 50px;\n  color: #ff6b6b;\n}\n.modal-title {\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n.modal-textArea-user {\n  padding: 10px;\n  height: 50px;\n  width: 100%;\n  border-radius: 20px;\n  border: 2px solid grey;\n}\n.modal-textArea-about {\n  padding: 10px;\n  height: 100px;\n  width: 100%;\n  border-radius: 20px;\n  border: 2px solid grey;\n}\n.modal-input-file {\n  padding: 10px;\n  height: 50px;\n  width: 100%;\n  border-radius: 20px;\n  border: 2px solid grey;\n}\n.subtext {\n  font-size: 0.8rem;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.modify-button {\n  margin: 20px;\n  padding: 20px;\n  background-color: #444444;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 40px;\n}\n.modify-button:hover {\n  background-color: #ff6b6b;\n}\n\n@media (max-width: 750px) {\n  .modal-main-content {\n    width: 90%;\n  }\n}\n</style>\n","import { render } from \"./UserModifyModal.vue?vue&type=template&id=5758aa7e\"\nimport script from \"./UserModifyModal.vue?vue&type=script&lang=js\"\nexport * from \"./UserModifyModal.vue?vue&type=script&lang=js\"\n\nimport \"./UserModifyModal.vue?vue&type=style&index=0&id=5758aa7e&lang=css\"\n\nimport exportComponent from \"D:\\\\codage\\\\OpenClassrooms\\\\Projet_7\\\\Groupomania-p7-OC\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserModifyModal.vue?vue&type=style&index=0&id=5758aa7e&lang=css\""],"sourceRoot":""}