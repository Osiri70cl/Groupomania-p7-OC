(function(t){function e(e){for(var o,r,u=e[0],i=e[1],s=e[2],l=0,f=[];l<u.length;l++)r=u[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);d&&d(e);while(f.length)f.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],o=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(o=!1)}o&&(c.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a={app:0},c=[];function u(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d2172fb":"1fa36faa","chunk-2d237d43":"4ab75a2a","chunk-1777b350":"54aef1cb","chunk-1e89777a":"917f7bcb","chunk-2570f1d2":"5f1a679e","chunk-2013c0c4":"991299be","chunk-4fc1d448":"175c2098","chunk-6a56cc9c":"9c5a31a4","chunk-576a8547":"3ae3607f","chunk-3b132d37":"7dee9ae7","chunk-4eb475aa":"d08a9cd3","chunk-dd61534e":"a5cbbcbe"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n={"chunk-1777b350":1,"chunk-1e89777a":1,"chunk-2013c0c4":1,"chunk-4fc1d448":1,"chunk-6a56cc9c":1,"chunk-576a8547":1,"chunk-3b132d37":1,"chunk-4eb475aa":1,"chunk-dd61534e":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-2d2172fb":"31d6cfe0","chunk-2d237d43":"31d6cfe0","chunk-1777b350":"7cef89c0","chunk-1e89777a":"d64d691a","chunk-2570f1d2":"31d6cfe0","chunk-2013c0c4":"b37946ff","chunk-4fc1d448":"0eccef69","chunk-6a56cc9c":"9a01e2cc","chunk-576a8547":"9039a7a2","chunk-3b132d37":"5d46a7e9","chunk-4eb475aa":"fac90adf","chunk-dd61534e":"278795d1"}[t]+".css",a=i.p+o,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===o||l===a))return e()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],l=s.getAttribute("data-href");if(l===o||l===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var o=e&&e.target&&e.target.src||a,c=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=o,delete r[t],d.parentNode.removeChild(d),n(c)},d.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){r[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var c=new Promise((function(e,n){o=a[t]=[e,n]}));e.push(o[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(t);var f=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",f.name="ChunkLoadError",f.type=o,f.request=r,n[1](f)}a[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var f=0;f<s.length;f++)e(s[f]);var d=l;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2023:function(t,e,n){},"343c":function(t,e,n){},"43df":function(t,e,n){"use strict";n("343c")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function r(t,e,n,r,a,c){var u=Object(o["y"])("Header"),i=Object(o["y"])("router-view"),s=Object(o["y"])("Footer");return Object(o["t"])(),Object(o["g"])(o["a"],null,[Object(o["j"])(u),Object(o["j"])(i),Object(o["j"])(s)],64)}var a=n("9c7b"),c=n.n(a),u={class:"imgdiv"},i=Object(o["h"])("img",{class:"imgLogoG",src:c.a,alt:"Groupomania logo"},null,-1),s=Object(o["h"])("img",{class:"imgLogoG",src:c.a,alt:"Groupomania logo"},null,-1),l={class:"allLinks"},f=Object(o["i"])("Accueil"),d=Object(o["i"])("Profil"),m=Object(o["i"])("Déconnexion"),h=Object(o["i"])("Connexion"),p=Object(o["i"])("Inscription");function b(t,e,n,r,a,c){var b=Object(o["y"])("router-link");return Object(o["t"])(),Object(o["g"])("header",null,[Object(o["h"])("nav",{class:Object(o["p"])([{scrolled:!a.view.atTopOfPage},"nav"])},[Object(o["h"])("div",u,["isConnected"==t.status?(Object(o["t"])(),Object(o["e"])(b,{key:0,to:"/wall"},{default:Object(o["F"])((function(){return[i]})),_:1})):(Object(o["t"])(),Object(o["e"])(b,{key:1,to:"/"},{default:Object(o["F"])((function(){return[s]})),_:1}))]),Object(o["h"])("div",l,["isConnected"==t.status?(Object(o["t"])(),Object(o["g"])(o["a"],{key:0},[Object(o["j"])(b,{to:"/wall",class:"internalLink"},{default:Object(o["F"])((function(){return[f]})),_:1}),Object(o["j"])(b,{to:"/profil",class:"internalLink"},{default:Object(o["F"])((function(){return[d]})),_:1}),Object(o["j"])(b,{to:"/login",onClick:e[0]||(e[0]=function(t){return c.logOut()}),class:"internalLink"},{default:Object(o["F"])((function(){return[m]})),_:1})],64)):(Object(o["t"])(),Object(o["g"])(o["a"],{key:1},[Object(o["j"])(b,{to:"/login",class:"externalLink"},{default:Object(o["F"])((function(){return[h]})),_:1}),Object(o["j"])(b,{to:"/signup",class:"externalLink"},{default:Object(o["F"])((function(){return[p]})),_:1})],64))])],2)])}var g=n("5530"),O=n("5502"),P={name:"Header",data:function(){return{view:{atTopOfPage:!0}}},beforeMount:function(){window.addEventListener("scroll",this.handleScroll)},computed:Object(g["a"])(Object(g["a"])({},Object(O["b"])(["status"])),{},{userConnected:function(){return this.$store.state.user.userId}}),methods:{handleScroll:function(){window.pageYOffset>0?this.view.atTopOfPage&&(this.view.atTopOfPage=!1):this.view.atTopOfPage||(this.view.atTopOfPage=!0)},logOut:function(){var t=this;this.$store.dispatch("logOut").then((function(){t.$router.push("/login")}))}}},v=(n("5a03"),n("6b0d")),k=n.n(v);const j=k()(P,[["render",b]]);var E=j,T={class:"footer"},S=Object(o["h"])("div",{class:"text-container-footer"},[Object(o["h"])("a",{href:"https://portfolio-remi.fr",class:"text-center-footer"},"© Rémi.P Projet 7 Groupomania OPENCLASSROOMS")],-1),_=[S];function A(t,e){return Object(o["t"])(),Object(o["g"])("footer",T,_)}n("e98b");const w={},y=k()(w,[["render",A]]);var C=y,U={name:"App",components:{Header:E,Footer:C}};n("43df");const L=k()(U,[["render",r]]);var G=L,D=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),I=n("2909"),N=(n("a4d3"),n("e01a"),n("4de4"),n("99af"),n("0e44")),R=n("bc3a"),M=n.n(R),H="api/",x=function(){return M.a.create({baseURL:H,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(K.state.user.token)}})},F={signup:function(t){return x().post("users/auth/signup",t)},login:function(t){return x().post("users/auth/login",t)},getAllUsers:function(){return x().get("users/accounts")},getUser:function(t){return x().get("users/accounts/"+t)},updateUser:function(t,e){return x().put("users/accounts/"+t,e)},deleteUser:function(t){return x().delete("users/accounts/"+t)}},q={createPost:function(t){return x().post("posts/add",t)},getOnePost:function(t){return x().get("posts/"+t)},getAllPosts:function(){return x().get("posts/")},updateOnePost:function(t,e){return x().put("posts/"+t,e)},deleteOnePost:function(t){return x().delete("posts/"+t)},addLike:function(t){return x().post("posts/"+t+"/likes")},createComment:function(t,e){return x().post("posts/"+t+"/comments",e)},getComments:function(t){return x().get("posts/"+t+"/comments")},deleteComment:function(t){return x().delete("posts/comments/"+t)}},B=Object(O["a"])({plugins:[Object(N["a"])()],state:{status:"",user:{},users:[],posts:[],post:{},message:""},mutations:{CREATE_SUCCES:function(t){t.status="accountCreated"},AUTH_REQ:function(t){t.status="loading"},AUTH_SUCCES:function(t,e){var n=e.userId,o=e.token,r=e.userName,a=e.userFirstName,c=e.userLastName,u=e.userBirth,i=e.userMail,s=e.userPicture,l=e.userDescription,f=e.userIsAdmin;t.status="isConnected",t.user.userId=n,t.user.token=o,t.user.username=r,t.user.firstName=a,t.user.lastName=c,t.user.birth=u,t.user.email=i,t.user.picture=s,t.user.description=l,t.user.isAdmin=f},GET_OTHER_USER:function(t,e){t.users=e},UPDATE_USER:function(t,e){t.users=e,t.message="Profil modifié !"},DELETE_USER:function(t,e){t.users=Object(I["a"])(t.users.filter((function(t){return t.id!==e}))),t.message="Profil supprimé !"},LOG_OUT:function(t){t.status="notConnected",t.user.userId="",t.user.username="",t.user.firstName="",t.user.lastName="",t.user.birth="",t.user.email="",t.user.picture="",t.user.description="",t.user.isAdmin=!1,t.user.token="",t.posts=[],t.post={},t.users={},t.message=""},AUTH_ERROR:function(t){t.status="error"},ADD_POST:function(t,e){t.posts=[e].concat(Object(I["a"])(t.posts)),t.message="Post publié !"},GET_POSTS:function(t,e){t.posts=e,t.message="Posts récupérés !"},GET_ONE_POST:function(t,e){t.post=e},UPDATE_POST:function(t,e){t.posts=[e].concat(Object(I["a"])(t.posts)),t.message="Post modifié !"},DELETE_POST:function(t,e){t.posts=Object(I["a"])(t.posts.filter((function(t){return t.id!==e}))),t.message="Post supprimé !"},ADD_LIKE:function(t,e){t.posts=[e].concat(Object(I["a"])(t.posts)),t.message="Post liké / disliké"},ADD_COMMENT:function(t,e){t.posts=[e].concat(Object(I["a"])(t.posts)),t.message="Post commenté !"},DELETE_COMMENT:function(t,e){t.posts=Object(I["a"])(t.posts.filter((function(t){return t.id!==e}))),t.message="Commentaire supprimé !"}},getters:{isLoggedIn:function(t){return!!t.user.token},authStatus:function(t){return t.status}},actions:{createAccount:function(t,e){var n=t.commit;return new Promise((function(t,o){n("AUTH_REQ"),F.signup(e).then((function(e){n("CREATE_SUCCES"),alert(e.data.message),t(e.data)})).catch((function(t){n("AUTH_ERROR"),o(t)}))}))},logToAccount:function(t,e){var n=t.commit;return new Promise((function(t,o){n("AUTH_REQ"),F.login(e).then((function(e){var o=e.data.token,r=e.data.userId;localStorage.setItem("token",o),localStorage.setItem("UserId",r),n("AUTH_SUCCES",{token:o,userId:r}),t(e.data)})).catch((function(t){n("AUTH_ERROR"),localStorage.clear(),o(t)}))}))},getUserInfos:function(t){var e=t.commit;return new Promise((function(t,n){var o=localStorage.getItem("UserId");F.getUser(o).then((function(n){var o=n.data.username,r=n.data.firstName,a=n.data.lastName,c=n.data.createdAt,u=n.data.email,i=n.data.picture,s=n.data.description,l=n.data.admin,f=localStorage.getItem("token"),d=localStorage.getItem("UserId");e("AUTH_SUCCES",{token:f,userId:d,userName:o,userFirstName:r,userLastName:a,userBirth:c,userMail:u,userPicture:i,userDescription:s,userIsAdmin:l}),t(n.data)})).catch((function(t){n(t)}))}))},getOtherUser:function(t,e){var n=t.commit;return new Promise((function(t,o){F.getUser(e).then((function(e){var o=e.data;n("GET_OTHER_USER",o),t(e.data)})).catch((function(t){o(t)}))}))},updateUserInfos:function(t,e){var n=t.commit;return new Promise((function(t,o){F.updateUser(e.id,e.data).then((function(e){var o=e.data;n("UPDATE_USER",o),t(e.data)})).then((function(){location.reload()})).catch((function(t){o(t)}))}))},deleteOneUser:function(t,e){var n=t.commit;return new Promise((function(t,o){F.deleteUser(e).then((function(o){n("DELETE_USER",e),t(o)})).catch((function(t){o(t)}))}))},logOut:function(t){var e=t.commit;return new Promise((function(t){e("LOG_OUT"),alert("A bientôt sur le réseau Groupomania ! 👋"),localStorage.clear(),t()}))},createPost:function(t,e){var n=t.commit;return new Promise((function(t,o){q.createPost(e).then((function(e){var o=e.data;n("ADD_POST",o),t(e.data)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;console.log(o),n("GET_POSTS",o),location.reload(!1),t(e.data)}))})).catch((function(t){o(t)}))}))},getAllPosts:function(t){var e=t.commit;return new Promise((function(t,n){q.getAllPosts().then((function(n){var o=n.data;e("GET_POSTS",o),t(n.data)})).catch((function(t){n(t)}))}))},getPostByID:function(t,e){var n=t.commit;return new Promise((function(t,o){q.getOnePost(e).then((function(e){var o=e.data;n("GET_ONE_POST",o),t(e.data)})).catch((function(t){o(t)}))}))},updatePost:function(t,e){var n=t.commit;return new Promise((function(t,o){q.updateOnePost(e.id,e.data).then((function(e){var o=e.data;n("UPDATE_POST",o),t(e.data)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;n("GET_POSTS",o),location.reload(!1),t(e.data)}))})).catch((function(t){o(t)}))}))},deleteOnePost:function(t,e){var n=t.commit;return new Promise((function(t,o){q.deleteOnePost(e).then((function(o){n("DELETE_POST",e),t(o)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;n("GET_POSTS",o),t(e.data)}))})).catch((function(t){o(t)}))}))},postLike:function(t,e){var n=t.commit;return new Promise((function(t,o){q.addLike(e).then((function(e){var o=e.data;n("ADD_LIKE",o),t(e)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;n("GET_POSTS",o),t(e.data)}))})).catch((function(t){o(t)}))}))},addComment:function(t,e){var n=t.commit;return new Promise((function(t,o){q.createComment(e.id,e.data).then((function(e){var o=e.data;n("ADD_COMMENT",o),t(e.data)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;n("GET_POSTS",o),t(e.data)}))})).catch((function(t){o(t)}))}))},deleteOneComment:function(t,e){var n=t.commit;return new Promise((function(t,o){q.deleteComment(e).then((function(o){n("DELETE_COMMENT",e),t(o)})).then((function(){q.getAllPosts().then((function(e){var o=e.data;n("GET_POSTS",o),t(e.data)}))})).catch((function(t){o(t)}))}))}}}),K=B,Q=[{path:"/",name:"Home",component:function(){return n.e("chunk-3b132d37").then(n.bind(null,"bb51"))},meta:{title:"Groupomania - Accueil"}},{path:"/login",name:"Login",component:function(){return n.e("chunk-4eb475aa").then(n.bind(null,"a55b"))},meta:{title:"Groupomania - Connexion"}},{path:"/signup",name:"Signup",component:function(){return n.e("chunk-dd61534e").then(n.bind(null,"34c3"))},meta:{title:"Groupomania - Inscription"}},{path:"/wall",name:"Wall",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-2570f1d2"),n.e("chunk-6a56cc9c")]).then(n.bind(null,"6e5b"))},meta:{title:"Groupomania - Mur",requiresAuth:!0},children:[{path:"/posts/add",name:"addPost",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-1777b350")]).then(n.bind(null,"6c8a"))},meta:{title:"Groupomania - Publier",showModal:!0,requiresAuth:!0,props:!0}},{path:"/posts/:id",name:"modifyPost",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-576a8547")]).then(n.bind(null,"72f5"))},meta:{title:"Groupomania - Modifier un post",showModal:!0,requiresAuth:!0,props:!0}}]},{path:"/profil",name:"Profil",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-2570f1d2"),n.e("chunk-4fc1d448")]).then(n.bind(null,"2768"))},meta:{title:"Groupomania - Profil",requiresAuth:!0},children:[{path:"/profil/modify",name:"modifyProfil",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-1e89777a")]).then(n.bind(null,"7432"))},meta:{title:"Groupomania - Modifier le profil",showModal:!0,requiresAuth:!0}}]},{path:"/profil/:id",name:"otherProfil",component:function(){return Promise.all([n.e("chunk-2d237d43"),n.e("chunk-2570f1d2"),n.e("chunk-2013c0c4")]).then(n.bind(null,"6a41"))},meta:{title:"Groupomania - Profil",requiresAuth:!0}},{path:"/:pathMatch(.*)",name:"Error",component:function(){return n.e("chunk-2d2172fb").then(n.bind(null,"c63e"))},meta:{title:"404 Not Found"}}],$=Object(D["a"])({history:Object(D["b"])("/"),routes:Q,scrollBehavior:function(){window.scrollTo(0,0)}});$.beforeEach((function(t,e,n){if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(K.getters.isLoggedIn)return void n();n("/login"),alert("Bien essayé mais il va falloir se connecter ! 😀")}else n()})),$.afterEach((function(t,e){console.log(e,t),document.title=t.meta.title}));var J=$;n("ba8c");Object(o["d"])(G).use(K).use(J).mount("#app")},"5a03":function(t,e,n){"use strict";n("89f6")},"89f6":function(t,e,n){},"9c7b":function(t,e,n){t.exports=n.p+"img/icon-white-navbar.edd5a02c.png"},ba8c:function(t,e,n){},e98b:function(t,e,n){"use strict";n("2023")}});
//# sourceMappingURL=app.0e8c8a86.js.map